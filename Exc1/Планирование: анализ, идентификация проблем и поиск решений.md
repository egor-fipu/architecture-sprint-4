### Список проблемных мест  

1. **Проблемы с отображением заказов в MES**
   - "Тяжелые" расчеты стоимости занимают значительное время, что оказывает влияние на скорость выполнения других функции MES, так как все эти операции выполняются в одном сервисе.

2. **Увеличение количества просроченных заказов**  
   - Основной поток заказов перегружает CRM и MES, из-за чего страдает как B2C, так и B2B сегмент.  

3. **Слабая масштабируемость инфраструктуры**  
   - По одному инстансу на приложения и базы данных создают риски при росте нагрузки.  

4. **Плохая синхронизация между CRM и MES**  
   - Заказы теряются или обрабатываются с задержкой из-за сложной интеграции через RabbitMQ.  

5. **Ручное тестирование и задержки релизов**  
   - Текущий процесс QA не масштабируется, что задерживает выпуск новых версий ПО.  

6. **Недостаточная прозрачность процессов**  
   - Нет аналитики по текущему состоянию заказов и нагрузке системы.  

---

### Список инициатив  

1. **Рефакторинг MES и дашборда**
   - Перенести расчет стоимости в отдельный микросервис, выполняющий эту задачу асинхронно, чтобы уменьшить нагрузку на основной сервис и ускорить обработку заказов.
   - Улучшить запросы к базе данных для списка заказов.  
   - Добавить индексацию и оптимизацию чтения из базы.  

2. **Масштабирование инфраструктуры**
   - Внедрить автомасштабирование для приложений на EC2. Для баз данных использовать репликацию и read-replicas для распределения нагрузки.

3. **Внедрение автоматизированного тестирования**  
   - Разработать автоматические E2E тесты, чтобы сократить время на тестирование.  
   - Использовать CI/CD для релиза в prod при успешном прохождении тестов.  

4. **Создание аналитической панели**  
   - Визуализировать состояние очередей, заказов, и метрик производительности системы.  

5. **Добавление приоритетов заказов**  
   - Внедрить классификацию заказов (например, B2C выше B2B).  

6. **Улучшение API для сторонних клиентов**  
   - Внедрить rate limiting, чтобы избежать перегрузки.  
   - Добавить документацию и поддержку версионности.  

---

### Приоритет инициатив  

1. **Рефакторинг MES и дашборда** (п. 1)   
   - Основная цель — изоляция функций MES для снижения блокировок и улучшения производительности.
   - Улучшение запросов к базе данных.

2. **Масштабирование инфраструктуры** (п. 2)  
   - Рост нагрузки неизбежен, и переход на горизонтальное масштабирование решит проблемы с доступностью.  

3. **Внедрение автоматизированного тестирования** (п. 3)  
   - Сократит задержки релизов и позволит быстрее реагировать на проблемы.

4. **Добавление приоритетов заказов** (п. 5)  
   - Повысит удовлетворенность клиентов, начиная с самых приоритетных сегментов.  

5. **Создание аналитической панели** (п. 4)  
   - Увеличит прозрачность процессов и облегчит принятие решений на основе данных.  

6. **Улучшение API для сторонних клиентов** (п. 6)  
   - Снизит нагрузку на систему от сторонних клиентов и обеспечит стабильность их работы.  

---

### Целевая архитектура через полгода  

1. Приложения работают на EC2 с поддержкой автоштабирования.
2. MES разделен на микросервисы, включая отдельный сервис для расчета стоимости.
3. Улучшенный дашборд MES работает без задержек. 
4. Базы данных используют репликацию и read-replicas для повышения производительности.
5. CI/CD включает автоматическое тестирование, что ускоряет релизы.
6. Система аналитики предоставляет данные о состоянии заказов и производительности.
---
